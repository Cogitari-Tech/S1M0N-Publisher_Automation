<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <title>S1M0N - Automation Core</title>
    <link rel="icon" type="image/png" href="/static/logo.png">

    <!-- External Libs -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <!-- Custom Styles -->
    <link rel="stylesheet" href="/static/css/main.css">
</head>

<body>

    <div class="wrapper">
        <!-- Sidebar -->
        <nav id="sidebar" class="sidebar">
            <div class="sidebar-header">
                <img src="/static/logo.png" alt="Logo" class="brand-logo">
                <i class="fas fa-bars text-muted" onclick="toggleSidebar()" style="cursor: pointer;"></i>
            </div>

            <ul class="nav flex-column">
                <li class="nav-item"><a id="nav-tab-dashboard" class="nav-link active" onclick="showTab('dashboard')"
                        data-i18n-tooltip="menu_dashboard"><i class="fas fa-chart-pie"></i> <span class="nav-text"
                            data-i18n="menu_dashboard">Visão Geral</span></a></li>
                <li class="nav-item"><a id="nav-tab-performance" class="nav-link" onclick="showTab('performance')"
                        data-i18n-tooltip="menu_performance"><i class="fas fa-tachometer-alt"></i> <span
                            class="nav-text" data-i18n="menu_performance">Performance</span></a></li>
                <li class="nav-item"><a id="nav-tab-evergreen" class="nav-link" onclick="showTab('evergreen')"
                        data-i18n-tooltip="menu_evergreen"><i class="fas fa-seedling"></i> <span class="nav-text"
                            data-i18n="menu_evergreen">Evergreen</span></a></li>
                <li class="nav-item"><a id="nav-tab-sources" class="nav-link" onclick="showTab('sources')"
                        data-i18n-tooltip="menu_sources"><i class="fas fa-rss"></i> <span class="nav-text"
                            data-i18n="menu_sources">Fontes RSS</span></a></li>
                <li class="nav-item"><a id="nav-tab-review" class="nav-link" onclick="showTab('review')"
                        data-i18n-tooltip="menu_review"><i class="fas fa-edit"></i> <span class="nav-text"
                            data-i18n="menu_review">Revisão</span></a></li>
                <li class="nav-item"><a id="nav-tab-settings" class="nav-link" onclick="showTab('settings')"
                        data-i18n-tooltip="menu_settings"><i class="fas fa-sliders-h"></i> <span class="nav-text"
                            data-i18n="menu_settings">Configurações</span></a></li>
                <li class="nav-item"><a id="nav-tab-manual" class="nav-link" onclick="showTab('manual')"
                        data-i18n-tooltip="menu_manual"><i class="fas fa-book"></i> <span class="nav-text"
                            data-i18n="menu_manual">Manual do Usuário</span></a></li>
            </ul>

            <div class="sidebar-footer">
                <div class="d-grid gap-2 mb-3">
                    <button class="btn btn-sm btn-outline-secondary text-start"
                        onclick="(new bootstrap.Modal(document.getElementById('policyModal'))).show()"
                        data-i18n-tooltip="btn_policies"><i class="fas fa-shield-alt me-2"></i> <span class="nav-text"
                            data-i18n="btn_policies">Políticas & Dados</span></button>
                </div>
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <select id="langSelect" class="form-select form-select-sm w-auto" onchange="changeLang(this.value)">
                        <option value="pt">BR</option>
                        <option value="en">EN</option>
                        <option value="es">ES</option>
                    </select>
                    <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" id="darkModeSwitch" onchange="toggleDarkMode()"
                            data-bs-toggle="tooltip" title="Modo Escuro">
                    </div>
                </div>
                <small class="text-muted" id="systemStatus">STATUS: <span
                        class="badge bg-secondary">STOPPED</span></small>
            </div>
        </nav>

        <!-- Main Content -->
        <div class="main-content">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h2 class="h4 m-0" id="pageTitle">
                    <span data-i18n="dash_title">Visão Geral</span>
                </h2>
                <div class="btn-group">
                    <button id="btn-main" class="btn btn-success" onclick="controlSystem('START')">
                        <i class="fas fa-play"></i> <span data-i18n="btn_start">Iniciar</span>
                        <i class="fas fa-question-circle ms-2 text-white-50" data-bs-toggle="popover"
                            data-bs-trigger="focus" tabindex="0" data-i18n-popover="tt_start"
                            onclick="event.stopPropagation()"></i>
                    </button>
                    <button id="btn-pause" class="btn btn-warning text-white disabled" onclick="controlSystem('PAUSE')"
                        disabled>
                        <i class="fas fa-pause"></i> <span data-i18n="btn_pause">Pausar</span>
                        <i class="fas fa-question-circle ms-2 text-white-50" data-bs-toggle="popover"
                            data-bs-trigger="focus" tabindex="0" data-i18n-popover="tt_pause"
                            onclick="event.stopPropagation()"></i>
                    </button>
                </div>
            </div>

            <!-- TABS -->

            <!-- Dashboard Tab -->
            <div id="tab-dashboard" class="settings-section active">
                <div class="row mb-4">
                    <div class="col-md-3">
                        <div class="card p-3 text-center">
                            <small class="text-muted" style="display:block"><span data-i18n="stat_total_label">Total de
                                    Publicados</span> <i class="fas fa-question-circle"
                                    data-i18n-tooltip="stat_total_tooltip"></i></small>
                            <div class="stat-val" id="totalArticles">-</div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card p-3 text-center">
                            <small class="text-muted" style="display:block"><span data-i18n="stat_today_label">Gerados
                                    Hoje</span> <i class="fas fa-question-circle"
                                    data-i18n-tooltip="stat_today_tooltip"></i></small>
                            <div class="stat-val" id="todayArticles">-</div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card p-3 text-center">
                            <small class="text-muted" style="display:block"><span data-i18n="stat_pending_label">Fila de
                                    Aprovação</span> <i class="fas fa-question-circle"
                                    data-i18n-tooltip="stat_pending_tooltip"></i></small>
                            <div class="stat-val text-warning" id="pendingCount">-</div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card p-3 text-center">
                            <small class="text-muted" style="display:block"><span data-i18n="stat_cache_label">Economia
                                    via Cache</span> <i class="fas fa-question-circle"
                                    data-i18n-tooltip="stat_cache_tooltip"></i></small>
                            <div class="stat-val text-primary" id="cacheCount">-</div>
                        </div>
                    </div>
                </div>
                <div class="card" id="card-logs">
                    <div class="card-header" onclick="toggleCard('card-logs')">
                        <span><i class="fas fa-terminal me-2"></i> <span data-i18n="log_title">Registro de
                                Execução</span></span>
                        <div>
                            <button class="btn btn-outline-danger me-2" onclick="event.stopPropagation(); clearLogs()"
                                data-i18n-tooltip="btn_clear_logs"><i class="fas fa-trash"></i></button>
                            <button class="btn btn-outline-secondary me-2" onclick="event.stopPropagation(); loadLogs()"
                                data-i18n-tooltip="btn_refresh"><i class="fas fa-sync"></i></button>
                        </div>
                    </div>
                    <div class="card-body p-0">
                        <div class="log-box" id="logBox">Loading...</div>
                    </div>
                </div>
            </div>

            <!-- Performance Tab -->
            <div id="tab-performance" class="settings-section">
                <div class="row mb-4">
                    <div class="col-md-4">
                        <div class="card p-3 text-center">
                            <h5>CPU</h5>
                            <div class="progress" style="height:20px">
                                <div id="cpuBar" class="progress-bar bg-info" style="width:0%"></div>
                            </div><span id="cpuVal">0%</span>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="card p-3 text-center">
                            <h5>RAM</h5>
                            <div class="progress" style="height:20px">
                                <div id="ramBar" class="progress-bar bg-warning" style="width:0%"></div>
                            </div><span id="ramVal">0%</span>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="card p-3 text-center">
                            <h5>Disk</h5>
                            <div class="progress" style="height:20px">
                                <div id="diskBar" class="progress-bar bg-success" style="width:0%"></div>
                            </div><span id="diskVal">0%</span>
                        </div>
                    </div>
                </div>
                <!-- S1M0N Core Config -->

                <div class="card" id="card-perf-history">
                    <div class="card-header" onclick="toggleCard('card-perf-history')">
                        <span><i class="fas fa-history me-2"></i> <span data-i18n="hist_opt_title">Histórico de
                                Otimização</span></span>
                        <div>
                            <button class="btn btn-danger text-white me-2 shadow-sm"
                                onclick="event.stopPropagation(); clearHistory('perf')" data-bs-toggle="tooltip"
                                data-i18n-tooltip="btn_clear_hist"><i class="fas fa-trash"></i></button>
                        </div>
                    </div>
                    <div class="card-body">
                        <table class="table table-sm table-hover">
                            <thead>
                                <tr>
                                    <th data-i18n="th_date">Data/Hora</th>
                                    <th data-i18n="th_action">Ação</th>
                                    <th data-i18n="th_status">Status</th>
                                </tr>
                            </thead>
                            <tbody id="perfHistoryTable"></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Evergreen Tab -->
            <div id="tab-evergreen" class="settings-section">
                <div class="card p-4 mb-4">
                    <label class="form-label fw-bold" data-i18n="input_topic">Tópico Principal</label>
                    <div class="input-group">
                        <input type="text" id="evergreenTopic" class="form-control"
                            data-i18n-placeholder="ph_evergreen">
                        <button class="btn btn-success shadow-sm" onclick="triggerEvergreen()"><i
                                class="fas fa-magic"></i>
                            <span data-i18n="btn_generate">Gerar</span></button>
                    </div>
                </div>
                <div class="card" id="card-evergreen-hist">
                    <div class="card-header" onclick="toggleCard('card-evergreen-hist')">
                        <span><span data-i18n="hist_gen_title">Histórico de Artigos Gerados</span>
                            <i class="fas fa-question-circle ms-2 text-muted" data-bs-toggle="popover"
                                data-bs-trigger="focus" tabindex="0" data-i18n-popover="help_evergreen"
                                onclick="event.stopPropagation()"></i></span>
                        <div>
                            <button class="btn btn-sm btn-outline-secondary me-2"
                                onclick="event.stopPropagation(); renderEvergreenHistory()"
                                data-i18n-tooltip="btn_refresh"><i class="fas fa-sync"></i></button>
                            <button class="btn btn-sm btn-outline-danger me-2"
                                onclick="event.stopPropagation(); clearHistory('evergreen')"
                                data-i18n-tooltip="btn_clear_hist"><i class="fas fa-trash"></i></button>
                        </div>
                    </div>
                    <div class="card-body">
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th data-i18n="th_date">Data</th>
                                    <th data-i18n="th_title">Título</th>
                                    <th data-i18n="th_cat">Categorias</th>
                                </tr>
                            </thead>
                            <tbody id="evergreenTableBody"></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Sources Tab -->
            <div id="tab-sources" class="settings-section">
                <div class="d-flex justify-content-between mb-4">
                    <button class="btn btn-outline-danger shadow-sm" onclick="deleteAllSources()"
                        data-i18n-tooltip="btn_delete_sources"><i class="fas fa-bomb"></i> <span
                            data-i18n="btn_delete_sources_txt">Apagar Fontes</span></button>
                    <button class="btn btn-primary shadow-sm" onclick="openRssModal()"
                        data-i18n-tooltip="btn_add_feed_tt" data-i18n="btn_add_feed">+ Add Feed</button>
                </div>
                <div class="card" id="card-rss">
                    <div class="card-header" onclick="toggleCard('card-rss')">
                        <span><i class="fas fa-stream me-2"></i> <span data-i18n="rss_manager_title">Gerenciador de
                                Fontes</span>
                            <i class="fas fa-question-circle ms-2 text-muted" data-bs-toggle="popover"
                                data-bs-trigger="focus" tabindex="0" data-i18n-popover="help_rss"
                                onclick="event.stopPropagation()"></i></span>
                    </div>
                    <div class="card-body">
                        <table class="table table-hover">
                            <thead>
                                <tr>
                                    <th data-i18n="th_active">Ativo</th>
                                    <th data-i18n="th_name">Nome</th>
                                    <th data-i18n="th_url">URL</th>
                                    <th></th>
                                </tr>
                            </thead>
                            <tbody id="rssTableBody"></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Review Tab -->
            <div id="tab-review" class="settings-section">
                <h4 class="mb-4"><i class="fas fa-tasks me-2"></i> <span data-i18n="review_title">Fila de Revisão</span>
                </h4>
                <div id="pending-container" class="row">
                    <div class="col-12 text-center py-5 text-muted"><i class="fas fa-spinner fa-spin"></i> Loading...
                    </div>
                </div>
            </div>

            <!-- Settings Tab -->
            <div id="tab-settings" class="settings-section">

                <form id="settingsForm">
                    <div class="row">
                        <!-- Column 1 -->
                        <div class="col-md-6">
                            <div class="card mb-4" id="card-google">
                                <div class="card-header" onclick="toggleCard('card-google')"><span><span
                                            data-i18n="sec_google_title">Google Ecosystem</span>
                                        <i class="fas fa-question-circle ms-2 text-muted" data-bs-toggle="popover"
                                            data-bs-trigger="focus" tabindex="0" data-i18n-popover="help_google"
                                            onclick="event.stopPropagation()"></i></span></div>
                                <div class="card-body">

                                    <div class="mb-3"><label>Project ID</label>
                                        <div class="input-group-custom"><input type="password"
                                                class="form-control secure-input" name="google_project_id"
                                                data-i18n-tooltip="tt_google_proj"
                                                data-i18n-placeholder="ph_google_project"><span class="input-clear-btn"
                                                onclick="clearInput(this)"><i class="fas fa-times"></i></span></div>
                                        <small class="security-msg">Bloqueado.</small>
                                        <small class="security-msg security-alert text-danger d-none"></small>
                                    </div>
                                    <div class="mb-3"><label>Gemini Key</label>
                                        <div class="input-group-custom"><input type="password"
                                                class="form-control secure-input" name="google_api_key"
                                                data-i18n-tooltip="tt_gemini_key" data-i18n-placeholder="ph_key"><span
                                                class="input-clear-btn" onclick="clearInput(this)"><i
                                                    class="fas fa-times"></i></span></div>
                                        <small class="security-msg">Bloqueado.</small>
                                        <small class="security-msg security-alert text-danger d-none"></small>
                                    </div>
                                    <div class="mb-3">
                                        <label>Modelo Gemini (Versão)</label>
                                        <select class="form-select" name="ai_model_mode">
                                            <option value="flash">Gemini 1.5 Flash (Rápido)</option>
                                            <option value="pro">Gemini 1.5 Pro (Inteligente)</option>
                                            <option value="legacy">Gemini 1.0 Pro (Legado)</option>
                                        </select>
                                    </div>
                                    <div class="mb-3"><label>YouTube Key</label>
                                        <div class="input-group-custom"><input type="password"
                                                class="form-control secure-input" name="youtube_api_key"
                                                data-i18n-tooltip="tt_yt_key" data-i18n-placeholder="ph_key"><span
                                                class="input-clear-btn" onclick="clearInput(this)"><i
                                                    class="fas fa-times"></i></span></div>
                                        <small class="security-msg">Bloqueado.</small>
                                        <small class="security-msg security-alert text-danger d-none"></small>
                                    </div>
                                </div>
                            </div>
                            <div class="card mb-4" id="card-news">
                                <div class="card-header" onclick="toggleCard('card-news')"><span><span
                                            data-i18n="sec_news_title">Fontes de Notícias</span>
                                        <i class="fas fa-question-circle ms-2 text-muted" data-bs-toggle="popover"
                                            data-bs-trigger="focus" tabindex="0" data-i18n-popover="help_news"
                                            onclick="event.stopPropagation()"></i></span></div>
                                <div class="card-body">
                                    <!-- GNews -->
                                    <div class="mb-2">
                                        <div class="d-flex justify-content-between align-items-center">
                                            <label>GNews Key</label>
                                        </div>
                                        <div class="input-group-custom"><input type="password"
                                                class="form-control secure-input" name="gnews_api_key"
                                                data-i18n-tooltip="tt_news_key" data-i18n-placeholder="ph_key"><span
                                                class="input-clear-btn" onclick="clearInput(this)"><i
                                                    class="fas fa-times"></i></span></div>
                                        <small class="security-msg security-alert text-danger d-none"></small>
                                        <div class="dropdown mt-1"><button
                                                class="btn btn-outline-secondary btn-sm dropdown-toggle w-100 text-start"
                                                type="button" data-bs-toggle="dropdown"><span
                                                    data-i18n="btn_categories">Categorias</span></button>
                                            <ul class="dropdown-menu w-100 p-2"
                                                style="max-height: 200px; overflow-y: auto;">
                                                <li><label class="dropdown-label"><input class="form-check-input me-2"
                                                            type="checkbox" name="gnews_categories"
                                                            value="world">World</label></li>
                                                <li><label class="dropdown-label"><input class="form-check-input me-2"
                                                            type="checkbox" name="gnews_categories"
                                                            value="technology">Technology</label></li>
                                                <li><label class="dropdown-label"><input class="form-check-input me-2"
                                                            type="checkbox" name="gnews_categories"
                                                            value="business">Business</label></li>
                                            </ul>
                                        </div>
                                    </div>
                                    <!-- NewsAPI -->
                                    <div class="mb-2">
                                        <div class="d-flex justify-content-between align-items-center">
                                            <label>NewsAPI Key</label>
                                        </div>
                                        <div class="input-group-custom"><input type="password"
                                                class="form-control secure-input" name="newsapi_key"
                                                data-i18n-tooltip="tt_news_key" data-i18n-placeholder="ph_key"><span
                                                class="input-clear-btn" onclick="clearInput(this)"><i
                                                    class="fas fa-times"></i></span></div>
                                        <small class="security-msg security-alert text-danger d-none"></small>
                                        <div class="dropdown mt-1"><button
                                                class="btn btn-outline-secondary btn-sm dropdown-toggle w-100 text-start"
                                                type="button" data-bs-toggle="dropdown"><span
                                                    data-i18n="btn_categories">Categorias</span></button>
                                            <ul class="dropdown-menu w-100 p-2"
                                                style="max-height: 200px; overflow-y: auto;">
                                                <li><label class="dropdown-label"><input class="form-check-input me-2"
                                                            type="checkbox" name="newsapi_categories"
                                                            value="business">Business</label></li>
                                                <li><label class="dropdown-label"><input class="form-check-input me-2"
                                                            type="checkbox" name="newsapi_categories"
                                                            value="entertainment">Entertainment</label></li>
                                                <li><label class="dropdown-label"><input class="form-check-input me-2"
                                                            type="checkbox" name="newsapi_categories"
                                                            value="general">General</label></li>
                                                <li><label class="dropdown-label"><input class="form-check-input me-2"
                                                            type="checkbox" name="newsapi_categories"
                                                            value="health">Health</label></li>
                                                <li><label class="dropdown-label"><input class="form-check-input me-2"
                                                            type="checkbox" name="newsapi_categories"
                                                            value="science">Science</label></li>
                                                <li><label class="dropdown-label"><input class="form-check-input me-2"
                                                            type="checkbox" name="newsapi_categories"
                                                            value="sports">Sports</label></li>
                                                <li><label class="dropdown-label"><input class="form-check-input me-2"
                                                            type="checkbox" name="newsapi_categories"
                                                            value="technology">Technology</label></li>
                                            </ul>
                                        </div>
                                    </div>
                                    <!-- Currents -->
                                    <div class="mb-2">
                                        <div class="d-flex justify-content-between align-items-center">
                                            <label>Currents Key</label>
                                        </div>
                                        <div class="input-group-custom"><input type="password"
                                                class="form-control secure-input" name="currents_api_key"
                                                data-i18n-tooltip="tt_news_key" data-i18n-placeholder="ph_key"><span
                                                class="input-clear-btn" onclick="clearInput(this)"><i
                                                    class="fas fa-times"></i></span></div>
                                        <small class="security-msg security-alert text-danger d-none"></small>
                                        <div class="dropdown mt-1"><button
                                                class="btn btn-outline-secondary btn-sm dropdown-toggle w-100 text-start"
                                                type="button" data-bs-toggle="dropdown"><span
                                                    data-i18n="btn_categories">Categorias</span></button>
                                            <ul class="dropdown-menu w-100 p-2"
                                                style="max-height: 200px; overflow-y: auto;">
                                                <li><label class="dropdown-label"><input class="form-check-input me-2"
                                                            type="checkbox" name="currents_categories"
                                                            value="regional">Regional</label></li>
                                                <li><label class="dropdown-label"><input class="form-check-input me-2"
                                                            type="checkbox" name="currents_categories"
                                                            value="technology">Technology</label></li>
                                                <li><label class="dropdown-label"><input class="form-check-input me-2"
                                                            type="checkbox" name="currents_categories"
                                                            value="lifestyle">Lifestyle</label></li>
                                                <li><label class="dropdown-label"><input class="form-check-input me-2"
                                                            type="checkbox" name="currents_categories"
                                                            value="business">Business</label></li>
                                                <li><label class="dropdown-label"><input class="form-check-input me-2"
                                                            type="checkbox" name="currents_categories"
                                                            value="general">General</label></li>
                                                <li><label class="dropdown-label"><input class="form-check-input me-2"
                                                            type="checkbox" name="currents_categories"
                                                            value="programming">Programming</label></li>
                                                <li><label class="dropdown-label"><input class="form-check-input me-2"
                                                            type="checkbox" name="currents_categories"
                                                            value="entertainment">Entertainment</label></li>
                                                <li><label class="dropdown-label"><input class="form-check-input me-2"
                                                            type="checkbox" name="currents_categories"
                                                            value="science">Science</label></li>
                                                <li><label class="dropdown-label"><input class="form-check-input me-2"
                                                            type="checkbox" name="currents_categories"
                                                            value="sports">Sports</label></li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- Column 2 -->
                        <div class="col-md-6">
                            <div class="card mb-4" id="card-wp">
                                <div class="card-header" onclick="toggleCard('card-wp')"><span><span
                                            data-i18n="sec_wp_title">WordPress</span>
                                        <i class="fas fa-question-circle ms-2 text-muted" data-bs-toggle="popover"
                                            data-bs-trigger="focus" tabindex="0" data-i18n-popover="help_wp"
                                            onclick="event.stopPropagation()"></i></span></div>
                                <div class="card-body">
                                    <div class="mb-2"><label>URL</label>
                                        <div class="input-group-custom"><input type="text" class="form-control"
                                                name="wordpress_url" data-i18n-tooltip="tt_wp_url"
                                                data-i18n-placeholder="ph_wp_url"><span class="input-clear-btn"
                                                onclick="clearInput(this)"><i class="fas fa-times"></i></span></div>
                                    </div>
                                    <div class="mb-2"><label data-i18n="lbl_user">User</label>
                                        <div class="input-group-custom"><input type="text" class="form-control"
                                                name="wordpress_username" data-i18n-tooltip="tt_wp_user"
                                                data-i18n-placeholder="ph_user"><span class="input-clear-btn"
                                                onclick="clearInput(this)"><i class="fas fa-times"></i></span></div>
                                    </div>
                                    <div class="mb-2">
                                        <label>Modo de Publicação</label>
                                        <select class="form-select" name="wp_publish_mode"
                                            data-i18n-tooltip="tt_pub_mode">
                                            <option value="publish" data-i18n="opt_auto">Automático (Publicar)</option>
                                            <option value="draft" data-i18n="opt_draft">Rascunho (Draft)</option>
                                        </select>
                                    </div>
                                    <div class="mb-2"><label>Pass</label>
                                        <div class="input-group-custom"><input type="password"
                                                class="form-control secure-input" name="wordpress_password"
                                                data-i18n-tooltip="tt_wp_pass" data-i18n-placeholder="ph_key"><span
                                                class="input-clear-btn" onclick="clearInput(this)"><i
                                                    class="fas fa-times"></i></span></div>
                                        <small class="security-msg">Bloqueado.</small>
                                        <small class="security-msg security-alert text-danger d-none"></small>
                                    </div>
                                    <hr>
                                    <div class="form-check form-switch"><input class="form-check-input" type="checkbox"
                                            name="require_manual_approval" data-i18n-tooltip="tt_manual_rev"><label
                                            class="form-check-label" data-i18n="tg_review">Revisão Manual</label></div>
                                </div>
                            </div>

                            <div class="card mb-4 control-panel-card" id="card-control-panel">
                                <div class="card-header" onclick="toggleCard('card-control-panel')"><span
                                        data-i18n="cp_title">Painel de Controle</span>
                                    <i class="fas fa-question-circle ms-2 text-muted" data-bs-toggle="popover"
                                        data-bs-trigger="focus" tabindex="0" data-i18n-popover="help_cp"
                                        onclick="event.stopPropagation()"></i>
                                </div>
                                <div class="card-body p-4">
                                    <div class="p-3 rounded mb-3 border">
                                        <div class="form-check form-switch mb-2"><input
                                                class="form-check-input api-toggle" type="checkbox"
                                                name="enable_global_images" data-linked-input="google_project_id"><label
                                                class="form-check-label" data-i18n="tg_images">Images (Vertex)</label>
                                        </div>
                                        <div class="form-check form-switch mb-2"><input
                                                class="form-check-input api-toggle" type="checkbox" name="enable_gnews"
                                                data-linked-input="gnews_api_key">
                                            <label class="form-check-label" data-i18n="btn_use_gnews">Usar GNews</label>
                                        </div>
                                        <div class="form-check form-switch mb-2"><input
                                                class="form-check-input api-toggle" type="checkbox"
                                                name="enable_newsapi" data-linked-input="newsapi_key">
                                            <label class="form-check-label" data-i18n="btn_use_newsapi">Usar
                                                NewsAPI</label>
                                        </div>
                                        <div class="form-check form-switch mb-2"><input
                                                class="form-check-input api-toggle" type="checkbox"
                                                name="enable_currents" data-linked-input="currents_api_key">
                                            <label class="form-check-label" data-i18n="btn_use_currents">Usar
                                                Currents</label>
                                        </div>
                                        <div class="form-check form-switch"><input class="form-check-input api-toggle"
                                                type="checkbox" name="enable_youtube_embed"
                                                data-linked-input="youtube_api_key"><label class="form-check-label"
                                                data-i18n="tg_videos">Videos (YT)</label></div>
                                    </div>
                                    <div class="mb-3 pt-3 border-top">
                                        <label class="form-label d-flex justify-content-between align-items-center">
                                            <span><i class="fas fa-clock me-2"></i><span
                                                    data-i18n="lbl_cycle_interval">Frequência</span> <i
                                                    class="fas fa-question-circle ms-1 text-muted small"
                                                    data-bs-toggle="tooltip" data-i18n-tooltip="tt_cycles"></i></span>
                                            <span class="badge bg-primary rounded-pill" id="val-exec-display">60
                                                min</span>
                                        </label>
                                        <input type="range" class="form-range" name="execution_interval" min="300"
                                            max="14400" step="300" value="3600"
                                            oninput="let m = Math.round(this.value/60); document.getElementById('val-exec-display').innerText = m + ' min'">
                                    </div>
                                    <div class="d-grid gap-2">
                                        <button type="button" class="btn btn-primary w-100" onclick="saveSettings()"
                                            data-bs-toggle="tooltip" title="Salvar todas as configurações"><i
                                                class="fas fa-save"></i> <span data-i18n="btn_save_all">Salvar
                                                Tudo</span></button>
                                        <button type="button" class="btn btn-outline-danger w-100"
                                            onclick="clearAllHistories()" data-bs-toggle="tooltip"
                                            title="Apagar histórico local/servidor"><i class="fas fa-skull"></i> <span
                                                data-i18n="btn_clear_global">Apagar Todos os Históricos</span></button>
                                        <button type="button" class="btn btn-success w-100" onclick="optimizeSystem()"
                                            data-bs-toggle="tooltip" data-i18n-tooltip="tt_optimize"><i
                                                class="fas fa-broom"></i> <span data-i18n="btn_optimize">Otimizar
                                                Sistema</span></button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>

            <!-- Manual Tab -->
            <div id="tab-manual" class="settings-section">
                <div class="card p-4" id="manualContainer"></div>
            </div>

            <div class="footer-copyright text-center py-4 text-muted small">&copy; <span id="yr"></span> <span
                    data-i18n="footer_copy">Equipe Cogitari</span></div>
        </div>
    </div>

    <!-- MODALS -->
    <div class="modal fade" id="rssModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" data-i18n="rss_modal_title">Feed RSS</h5><button class="btn-close"
                        data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body"><input type="text" id="rssName" class="form-control mb-2"
                        data-i18n-placeholder="ph_rss_name"><input type="text" id="rssTheme" class="form-control mb-2"
                        data-i18n-placeholder="ph_rss_theme"><input type="text" id="rssUrl" class="form-control"
                        data-i18n-placeholder="ph_rss_url"></div>
                <div class="modal-footer"><button class="btn btn-success" onclick="saveRss()" data-i18n="btn_save"
                        data-bs-toggle="tooltip" data-i18n-tooltip="btn_save_rss">Salvar</button></div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="policyModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 data-i18n="btn_policies">Legal</h5><button class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="accordion" id="accPol">
                        <div class="accordion-item">
                            <h2 class="accordion-header"><button class="accordion-button" data-bs-toggle="collapse"
                                    data-bs-target="#c1" data-i18n="pol_priv_t">Privacidade</button></h2>
                            <div id="c1" class="accordion-collapse collapse show" data-bs-parent="#accPol">
                                <div class="accordion-body" data-i18n="pol_priv_d">...</div>
                            </div>
                        </div>
                        <div class="accordion-item">
                            <h2 class="accordion-header"><button class="accordion-button collapsed"
                                    data-bs-toggle="collapse" data-bs-target="#c2"
                                    data-i18n="pol_terms_t">Termos</button></h2>
                            <div id="c2" class="accordion-collapse collapse" data-bs-parent="#accPol">
                                <div class="accordion-body" data-i18n="pol_terms_d">...</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="cycleModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" data-i18n="modal_cycle_title">Ajuste de Ciclos</h5>
                    <button class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body text-center">
                    <label class="form-label" data-i18n="lbl_cycle_interval">Intervalo (minutos)</label>
                    <div class="display-1 fw-bold text-primary my-3" id="cycleVal">120 min</div>
                    <input type="range" class="form-range custom-range" min="30" max="1440" step="30" id="cycleRange"
                        oninput="document.getElementById('cycleVal').innerText = this.value + ' min'">

                    <div class="d-flex justify-content-center gap-2 mt-3">
                        <button class="btn btn-outline-secondary btn-sm" onclick="setCycle(30)">30m</button>
                        <button class="btn btn-outline-secondary btn-sm" onclick="setCycle(60)">1h</button>
                        <button class="btn btn-outline-secondary btn-sm" onclick="setCycle(120)">2h</button>
                        <button class="btn btn-outline-secondary btn-sm" onclick="setCycle(360)">6h</button>
                    </div>

                    <div class="alert alert-info small mt-4 text-start">
                        <i class="fas fa-info-circle"></i> <span data-i18n="cycle_info">Recomendado: 120min para evitar
                            API Rate Limits. Mínimo: 30min para segurança.</span>
                    </div>
                </div>
                <div class="modal-footer justify-content-center">
                    <button class="btn btn-primary w-50" onclick="saveCycle()" data-i18n="btn_save">Salvar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- History Detail Modal -->
    <div class="modal fade" id="historyModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title"><i class="fas fa-history me-2"></i> Detalhes da Sessão</h5>
                    <button class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body bg-light">
                    <div id="history-content" class="p-3" style="max-height: 500px; overflow-y: auto;">
                        <!-- Chat logs go here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div id="toast-container"></div>

    <!-- Custom Confirmation Modal -->
    <div id="customModalOverlay" class="modal-overlay">
        <div class="custom-modal">
            <div class="modal-icon warning" id="modalIcon">
                <i class="fas fa-exclamation-triangle"></i>
            </div>
            <div class="modal-title" id="modalTitle">Confirmar Ação</div>
            <div class="modal-text" id="modalText">Tem certeza que deseja prosseguir?</div>
            <div class="modal-actions">
                <button class="modal-btn btn-cancel" id="btnCancel">Cancelar</button>
                <button class="modal-btn btn-confirm" id="btnConfirm">Confirmar</button>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/static/js/dashboard.js"></script>

</body>

</html>